# 触摸子板PCB设计教程（嘉立创EDA）

> 触摸子板是一块独立的小PCB，放在设备顶面，上面有一个触摸铜皮焊盘和6颗WS2812B RGB灯珠（环绕触摸焊盘），通过4根导线连接到主板。

---

## 子板结构

```
      ┌───────────────────────┐
      │       ◆2  ◆3          │
      │    ╭──────────╮       │
      │ ◆1 │  触摸焊盘 │ ◆4   │   ◆ = WS2812B-3535
      │    ╰──────────╯       │
      │       ◆6  ◆5          │
      │                       │
      │ ● SIG  ● GND         │
      │ ● VCC  ● DIN         │  ← 4个焊线孔
      └───────────────────────┘
            约 22mm × 20mm
```

需要的元素：
- **触摸铜皮焊盘**：18×18mm矩形，顶层铜皮
- **WS2812B-MINI-V3/W × 6**（C527089）：RGB灯珠，环绕触摸焊盘排列，有反接保护和过压保护
- **去耦电容 × 6**：100nF 0402，每颗WS2812B旁边一个
- **焊线孔 × 4**：SIG（触摸信号）、GND、VCC（3.3V）、DIN（LED数据）
- **板框**：约 22mm × 20mm（比原来大一圈，放得下6颗灯）

---

## 第一步：新建子板项目

1. 打开嘉立创EDA专业版
2. **文件 → 新建 → 项目**
3. 项目名称填 `AI-Bot触摸子板`
4. 在项目中**新建原理图**（子板有WS2812B元件，需要先画原理图再转PCB）

---

## 第二步：设置PCB参数

1. 打开新建的PCB文件
2. **设计 → 规则设置**（或快捷键）：
   - 最小线宽：0.2mm（默认即可）
   - 最小间距：0.2mm（默认即可）
3. 设置网格：
   - **视图 → 网格设置** → 捕获网格设为 **0.5mm**（方便对齐）

---

## 第三步：画板框（Board Outline）

板框决定了PCB的外形尺寸。

1. 切换到 **板框层（Board Outline）**
   - 在右侧图层面板中点击 `Board Outline`（或快捷键切换）
2. 选择 **矩形工具**（或用线条工具画）
3. 画一个矩形：
   - 宽度：**22mm**
   - 高度：**20mm**
   - 起点坐标可以设为 (0, 0)，终点 (22, 20)
4. 如果想要圆角：
   - 选中矩形 → 右键 → **设置圆角** → 半径填 **1mm**（可选，纯美观）

> **尺寸说明：** 22×20mm 足够放下10mm触摸焊盘、6颗WS2812B和4个焊线孔。可根据外壳实际空间调整。

---

## 第四步：画触摸铜皮焊盘（核心）

这是整块板最重要的部分。

### 4.1 画圆形铜皮

1. 切换到 **顶层铜皮（Top Copper / F.Cu）**
2. 选择 **实心区域（Solid Region）** 或 **铜皮填充（Copper Zone）** 工具
3. 画一个圆形：
   - 在板子中心偏上的位置
   - **直径 10mm**（半径 5mm）
   - 圆心坐标建议：(11, 8)（板子中心偏上）
4. 确保这块铜皮**不属于任何网络（No Net）**
   - 选中铜皮 → 属性面板 → 网络选择 **无/No Net**

> **关键：触摸焊盘必须是悬浮的（不接地、不接任何网络），只通过导线连到主板的ESD电阻。**

### 4.2 另一种画法：用焊盘工具

如果铜皮填充不好操作，也可以用**自定义焊盘**：

1. **放置 → 焊盘**
2. 焊盘属性设置：
   - 形状：圆形
   - 直径：**10mm**
   - 层：仅顶层（Top）
   - 孔径：**0**（表面贴装焊盘，无孔）
   - 网络：No Net
3. 放置在板子中心偏上位置

两种方法效果一样，选你觉得方便的。

---

## 第五步：放置焊线孔

焊线孔用于焊接从子板到主板的导线。需要4个：触摸信号、LED数据、电源、地线。

所有焊线孔参数相同：
- 形状：圆形
- 焊盘外径：**2mm**（大一点方便手工焊线）
- 孔径：**1mm**（能穿过导线即可）
- 层：全层（Through-hole）

### 5.1 放置4个焊线孔

| 焊线孔 | 用途 | 建议坐标 |
|--------|------|---------|
| SIG | 触摸信号 → 主板4.7KΩ电阻 | (4, 18) |
| DIN | WS2812B数据 → 主板IO38 | (9, 18) |
| VCC | 3.3V电源 | (14, 18) |
| GND | 地线 | (19, 18) |

1. **放置 → 焊盘（Pad）**，选择通孔焊盘
2. 按上表依次放置4个，排成一排在板子底部
3. 相邻孔间距约 **5mm**，方便焊接

### 5.2 标注丝印

1. 切换到 **顶层丝印层（Top Silkscreen）**
2. **放置 → 文字**
3. 在每个孔旁标注：`SIG`、`DIN`、`VCC`、`GND`
4. 字体大小：**0.8mm**

---

## 第六步：放置WS2812B灯珠

6颗WS2812B-3535环绕触摸焊盘排列，形成一圈灯环。

### 6.1 搜索元件

1. 按 `P` 打开元件库，搜索 `WS2812B-3535`
2. 选择 3535 封装（3.5mm × 3.5mm）的版本
3. 放置6颗，编号 LED1~LED6

### 6.2 摆放位置

6颗灯均匀分布在触摸焊盘周围，圆心与触摸焊盘同心，分布半径约 **8mm**（焊盘边缘到灯珠中心约3mm间距）：

```
         LED2    LED3
          ◆        ◆

   LED1 ◆  [触摸焊盘]  ◆ LED4

          ◆        ◆
         LED6    LED5
```

每颗灯之间角度间隔 60°。摆放时可以用嘉立创的**极坐标定位**或手动对齐。

### 6.3 去耦电容

每颗WS2812B旁边放一个 **100nF（0.1μF）0402电容**，接在VCC和GND之间：

1. 搜索 `100nF 0402`，放置6个，编号 C1~C6
2. 每个电容紧贴对应LED放置，距离越近越好

> **为什么要加？** WS2812B切换颜色时瞬间电流变化大，去耦电容稳定供电，防止灯珠闪烁或通信出错。

### 6.4 WS2812B串联接线

WS2812B是串联通信的，数据从DIN进、DOUT出，依次串联：

```
DIN焊线孔 → LED1.DIN → LED1.DOUT → LED2.DIN → LED2.DOUT → ... → LED6.DOUT (悬空)
```

每颗灯的VCC接3.3V，GND接地。

---

## 第七步：走线（Routing）

### 7.1 触摸焊盘 → SIG焊线孔

1. 用走线工具从触摸焊盘边缘画一条线到SIG焊线孔
2. 线宽：**0.5mm**
3. 走线尽量短且直，不要绕弯

### 7.2 WS2812B数据线串联

1. 从DIN焊线孔走线到LED1的DIN引脚
2. LED1的DOUT走线到LED2的DIN
3. 依次串联到LED6，LED6的DOUT悬空不接
4. 数据线线宽：**0.3mm**

### 7.3 WS2812B电源线

1. 所有LED的VCC连到VCC焊线孔
2. 所有LED的GND连到GND焊线孔
3. 电源线宽：**0.5mm**（6颗灯全亮白色时峰值电流约120mA）

> **走线顺序建议：** 先走数据串联线（最关键），再走电源线，最后走触摸信号线。触摸信号线远离LED数据线，减少干扰。

---

## 第八步：底层铺地（可选但推荐）

在底层铺一块地铜皮，作用：
- 为GND焊线孔提供连接
- 增加板子结构强度
- 提供一定的EMI屏蔽

### 重要：触摸焊盘正下方不能铺地！

1. 切换到 **底层铜皮（Bottom Copper / B.Cu）**
2. 用 **铜皮填充** 工具画一个覆盖整块板的区域
3. 网络设置为 **GND**（如果没有GND网络，手动创建一个）
4. **挖空触摸焊盘正下方的区域**：
   - 在底层铜皮中，对触摸焊盘正下方设置**禁止铺铜区（Keep-out）**
   - 禁止区域比触摸焊盘大 **2mm**（即直径14mm的圆形禁止区）

```
底层视图：

    ┌─────────────────────┐
    │▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓│  ▓ = GND铜皮
    │▓▓▓╭─────────╮▓▓▓▓▓▓│
    │▓▓▓│         │▓▓▓▓▓▓│
    │▓▓▓│  禁铺区  │▓▓▓▓▓▓│  ← 触摸焊盘正下方挖空
    │▓▓▓│ (14mm)  │▓▓▓▓▓▓│
    │▓▓▓╰─────────╯▓▓▓▓▓▓│
    │▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓│
    │▓▓▓▓▓● GND孔 ▓▓▓▓▓▓│  ← GND焊线孔连到底层地铜皮
    └─────────────────────┘
```

> **为什么挖空？** 触摸焊盘正下方有地铜皮会大幅增加对地寄生电容，降低触摸灵敏度。

---

## 第九步：检查与导出

### 9.1 DRC检查

1. **设计 → DRC检查**（Design Rule Check）
2. 确认无错误后再导出

### 9.2 最终检查清单

- [ ] 触摸焊盘：10mm圆形，顶层，悬浮不接地，走线连到SIG焊线孔
- [ ] 触摸焊盘正下方底层无铜皮（已挖空）
- [ ] WS2812B × 6：环绕触摸焊盘均匀分布，数据线串联顺序正确
- [ ] 去耦电容 × 6：100nF 0402，每颗LED旁边一个，接VCC和GND
- [ ] 焊线孔 × 4：SIG、DIN、VCC、GND，通孔2mm/1mm
- [ ] 丝印：4个焊线孔标注清晰
- [ ] 板框：22×20mm，能放进外壳顶面

### 9.3 导出生产文件

1. **文件 → 导出 → Gerber**
2. 或者直接在嘉立创EDA中点击 **下单** 按钮一键打样

---

## 主板侧需要做的

主板上需要预留4个对应的焊线孔：

| 焊线孔 | 连接到主板的 |
|--------|------------|
| SIG | 4.7KΩ ESD电阻输出端 |
| DIN | IO38（LED数据线） |
| VCC | 3.3V电源 |
| GND | GND |

```
连接示意：

  触摸子板                       主板
  ┌────────┐                  ┌─────────────────────┐
  │ 触摸焊盘 │                  │                     │
  │ WS2812B │    4根导线        │   4.7KΩ             │
  │  ● SIG  ├─────────────────┤● SIG ──┤R├── IO7   │
  │  ● DIN  ├─────────────────┤● DIN ─────── IO38  │
  │  ● VCC  ├─────────────────┤● VCC ─────── 3V3   │
  │  ● GND  ├─────────────────┤● GND ─────── GND   │
  └────────┘                  └─────────────────────┘
```

---

## 打样建议

### 拼板方案（推荐）

子板与主板拼在同一块PCB中打样，掰开即可分离：

- 在主板PCB文件中，将子板板框画在主板旁边，间距 **2~3mm**
- 分离方式推荐 **V-Cut**（边缘平整）或 **邮票孔**（0.6mm孔径，间距0.8mm，3~5个）
- 拼板后整体尺寸不超过 **100×100mm**（嘉立创5元打样限制）
- 板厚与主板统一（通常 **1.6mm**），拼板必须同层数同板厚
- 颜色随意，建议和主板一致
- **需要钢网**（WS2812B-3535和0402电容都是贴片元件）
- 可以选择嘉立创SMT贴片服务，省去手焊小元件的麻烦

> **注意：** 触摸子板底层GND铺铜的禁止区（触摸焊盘正下方）不要被拼板连接处破坏。
