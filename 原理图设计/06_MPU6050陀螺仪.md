# ZY-MPU-6050 邮票孔陀螺仪模块原理图设计教程（嘉立创EDA）

> ZY-MPU-6050是一个已经把MPU6050芯片、LDO稳压器、I2C上拉电阻、去耦电容全部焊好的小模组（15mm × 12mm），通过8个邮票孔（也叫城堡孔/半孔）焊接到你的主板上。它通过I2C接口和ESP32-S3通信，可以检测设备的加速度和旋转角速度。
> 简单说：它就是一个"感知运动的小模块"，能告诉主控"设备被摇了"、"设备被翻转了"。

---

## 第一步：认识ZY-MPU-6050模组

### 它是什么？

MPU6050是InvenSense（现被TDK收购）生产的一颗六轴运动传感器芯片，内部集成了：

- 三轴加速度计（感知前后、左右、上下方向的加速度，包括重力）
- 三轴陀螺仪（感知绕三个轴的旋转角速度）
- 温度传感器（片内温度，精度±1℃）
- DMP（数字运动处理器，硬件加速姿态融合算法）

**ZY-MPU-6050模组**是把MPU6050裸芯片焊在一块15mm × 12mm的小PCB板上，板上还帮你焊好了：

| 模组内部已有的元件 | 作用 |
|-----------------|------|
| U1: MPU6050芯片 | 核心传感器 |
| U3: LDO稳压器 | 支持3.3V~5V宽电压输入（内部降到MPU6050需要的电压） |
| R1: 5.1K下拉电阻 | ADO引脚默认接地（I2C地址=0x68） |
| R2, R3: 5.1K上拉电阻 | SCL、SDA总线上拉（I2C通信必需） |
| C1~C6: 多颗去耦电容 | 电源滤波 |

### 邮票孔（城堡孔）是什么？

普通模组用排针插到你的板子上，而邮票孔模组的边缘有半圆形的镀锡焊盘（像邮票边缘的齿孔），直接贴焊到你PCB的焊盘上。

| 对比 | 排针模组 | 邮票孔模组（我们用的） |
|------|---------|-------------------|
| 安装方式 | 排针插排母，或直接焊排针 | 边缘半孔直接贴焊到主板 |
| 高度 | 较高（有排针凸起） | 很矮（几乎和主板齐平） |
| 可靠性 | 排针接触可能松动 | 焊死在板上，非常牢固 |
| 适合场景 | 面包板调试 | 做成品产品 |

### 为什么用模组而不是MPU6050裸芯片？

MPU6050裸芯片是QFN-24封装（4mm × 4mm × 0.9mm），引脚间距只有0.5mm，需要：
- 精密的PCB走线（0.5mm引脚间距对新手不友好）
- 自己设计LDO稳压、去耦电容、上拉电阻等外围电路
- 回流焊接（底部有散热焊盘，手焊困难）

而邮票孔模组：
- 所有外围电路都已焊好，你只需连8根线
- 邮票孔间距2.54mm，手焊也很轻松
- 模组自带LDO，可以直接接3.3V或5V

**对于我们这个项目，用邮票孔模组是最合理的选择**——省心、省事、可靠。

### 主要参数

| 参数 | 值 |
|------|-----|
| 模组型号 | ZY-MPU-6050 |
| 核心芯片 | MPU6050 |
| 模组尺寸 | 15mm × 12mm |
| 工作电压 | 3.0V~5.5V（模组自带LDO） |
| 通信接口 | I2C，最高400kHz |
| I2C地址 | 0x68（ADO=LOW，默认）或 0x69（ADO=HIGH） |
| 加速度量程 | ±2g / ±4g / ±8g / ±16g（软件可选） |
| 陀螺仪量程 | ±250 / ±500 / ±1000 / ±2000 °/s（软件可选） |
| 加速度分辨率 | 16384 LSB/g（±2g时） |
| 陀螺仪分辨率 | 131 LSB/(°/s)（±250°/s时） |
| 工作温度 | -40℃~+85℃ |

---

## 第二步：认识模组的8个邮票孔引脚

ZY-MPU-6050模组两侧各有4个邮票孔，共8个引脚：

**左侧（引脚1~4）：**

| 引脚号 | 名称 | 功能 | 你需要做什么 |
|--------|------|------|-------------|
| 1 | **VCC** | 电源输入（3.0V~5.5V） | 接3V3 |
| 2 | **GND** | 电源地 | 接GND |
| 3 | **SCL** | I2C时钟线（模组内置5.1K上拉到VCC） | 接ESP32-S3的IO6 |
| 4 | **SDA** | I2C数据线（模组内置5.1K上拉到VCC） | 接ESP32-S3的IO5 |

**右侧（引脚5~8，从下到上）：**

| 引脚号 | 符号名称 | 功能 | 你需要做什么 |
|--------|---------|------|-------------|
| 5 | **ADO** | I2C地址选择（模组内置5.1K下拉到GND） | 不接（默认地址0x68） |
| 6 | **CL** | 辅助I2C时钟（AUX_CL，接外部磁力计等） | 不接（我们不用） |
| 7 | **DA** | 辅助I2C数据（AUX_DA，接外部磁力计等） | 不接（我们不用） |
| 8 | **INT** | 中断输出（数据就绪时通知主控） | 接ESP32-S3的IO4（可选） |

---

## 第三步：你需要准备的元件

| 元件 | 值/型号 | 封装 | 数量 | 位号 | 用途 |
|------|--------|------|------|------|------|
| MPU6050模组 | ZY-MPU-6050 | 邮票孔8P | 1 | U4 | 六轴运动传感器模组 |
| 去耦电容 | 100nF | 0603 | 1 | C9 | VCC电源滤波（可选但推荐） |

**没错，就这么少。** 因为模组内部已经帮你搞定了所有外围电路（LDO、上拉电阻、去耦电容等），你的主板上只需要一个模组加一个可选的电容。

> **C9真的需要吗？** 严格来说模组内部已经有去耦电容了，不加C9也能工作。但在主板电源端再加一个100nF作为"最后一道防线"是良好的工程习惯——主板上的走线会引入一些电源噪声，C9在模组VCC引脚旁边就地过滤掉这些噪声。一颗0603电容几分钱，加上没坏处。

---

## 第四步：在嘉立创EDA中创建邮票孔模组符号

你已经创建好了自定义符号，引脚排列如下：

```text
              ┌─────────────────┐
              │                 │
     ●── 1 ──│  VCC       INT  │── 8 ──●
              │                 │
     ●── 2 ──│  GND        DA  │── 7 ──●
              │                 │
     ●── 3 ──│  SCL        CL  │── 6 ──●
              │                 │
     ●── 4 ──│  SDA       ADO  │── 5 ──●
              │                 │
              └─────────────────┘
```

符号设计没有问题——左侧电源+I2C主信号线，右侧辅助/配置引脚，引脚编号和模组实物一致。

> **关于右侧引脚名称缩写**：你的符号用了 `DA`（对应AUX_DA）和 `CL`（对应AUX_CL），这完全可以。原理图符号上的引脚名称只是给人看的标注，真正建立连接关系的是**引脚编号**（5~8）和你后面加的网络标签。名称缩写不影响任何功能。

> **封装怎么办？** 原理图符号画好后，还需要在PCB阶段创建邮票孔的封装（8个半圆形焊盘）。封装是PCB阶段的事，原理图阶段先不用管，后面做PCB时再处理。

---

## 第五步：放置元件并连线

### 5.1 放置MPU6050模组（U4）

1. 从元件库（自建库）中搜索 `ZY-MPU-6050`
2. 放置到原理图画布上
3. 双击，确认位号为 `U4`

### 5.2 放置100nF电容（C9）

1. 搜索 `100nF`，选择 `0603` 封装
2. 放在U4旁边（靠近VCC引脚的位置）

---

## 第六步：连线

### 连接示意图

```text
                    ZY-MPU-6050 模组 (U4)
                 ┌──────────────────────┐
                 │                      │
    3V3 ────┬───│ VCC (Pin 1)          │
            │   │               INT (Pin 8) ── MPU_INT（可选）
          C9(100nF)                    │
            │   │                      │
           GND  │ GND (Pin 2) ── GND   DA (Pin 7) ── NC
                │                      │
  I2C_SCL ─────│ SCL (Pin 3)    CL (Pin 6) ── NC
                │                      │
  I2C_SDA ─────│ SDA (Pin 4)   ADO (Pin 5) ── NC
                │                      │
                └──────────────────────┘
```

### 操作步骤

**1. 连接电源（VCC和GND）**

- VCC (Pin 1) 连到 `3V3` 电源符号
- GND (Pin 2) 连到 `GND` 符号

**2. 放置去耦电容C9**

- C9 一端连到 VCC (Pin 1) 的线上
- C9 另一端连到 GND
- **尽量靠近Pin 1放置**

**3. 连接I2C信号线（用网络标签）**

在对应引脚上放置网络标签：

| 引脚 | 网络标签 | 说明 |
|------|---------|------|
| SCL (Pin 3) | `I2C_SCL` | 和ESP32-S3的IO6同名，自动连接 |
| SDA (Pin 4) | `I2C_SDA` | 和ESP32-S3的IO5同名，自动连接 |

> **重要**：你还需要回到ESP32-S3那张原理图，在IO5和IO6引脚上也放置同名的 `I2C_SDA` 和 `I2C_SCL` 标签。这样两边就通过标签"隐形连接"了。

**4. INT引脚（可选）**

如果你想用中断功能（推荐）：

| 引脚 | 网络标签 | 说明 |
|------|---------|------|
| INT (Pin 8) | `MPU_INT` | 和ESP32-S3的IO4同名，自动连接 |

同样需要在ESP32-S3的IO4引脚上也放置 `MPU_INT` 标签。

如果你暂时不想用中断功能，INT引脚可以**悬空不接**（模组内部没有对INT做任何处理，悬空不会有问题）。

**5. 不使用的引脚（ADO、CL、DA）**

这三个引脚**都不接**：

- **ADO (Pin 5)**：模组内部已经用5.1K电阻下拉到GND了，I2C地址固定为0x68，不需要外部连线
- **CL (Pin 6)**：辅助I2C总线的时钟线（AUX_CL），用于连接外部磁力计（如HMC5883L）。我们不需要，不接
- **DA (Pin 7)**：辅助I2C总线的数据线（AUX_DA），同上，不接

> **不接的引脚需要在原理图上标注吗？** 建议在这些引脚旁边画一个小"×"或加文字 `NC`（Not Connected），表示你是故意不接的，而不是忘了接。这样其他人看原理图时不会疑惑。

---

## 第七步：每个连接的详细解释

### VCC（电源）— 接3.3V还是5V？

模组自带LDO稳压器（U3），输入电压范围3.0V~5.5V，内部会降到MPU6050芯片需要的工作电压。

我们的系统是3.3V供电，直接接3V3就行。模组内部LDO在3.3V输入时依然能正常工作（压降很低的LDO）。

> **接5V行不行？** 如果你的板子上有5V，也可以接5V。但有一个问题：模组内部的I2C上拉电阻是拉到VCC的。如果VCC=5V，SCL和SDA上的高电平就是5V——而ESP32-S3的GPIO是3.3V的，5V会损坏ESP32-S3！
>
> 所以**一定要接3.3V**，除非你在SCL和SDA上加了电平转换电路（对我们这个项目完全没必要）。

### GND（地）— 一定要接

不多解释了，和前面所有模块一样——电源回路必须有地线。

### SCL和SDA（I2C总线）— 为什么不需要加上拉电阻？

I2C总线的SCL和SDA是"开漏输出"——设备只能主动拉低（输出0），释放时靠外部上拉电阻拉回高电平（1）。所以I2C总线上**必须有上拉电阻**才能工作。

但是，ZY-MPU-6050模组内部**已经焊好了5.1K的上拉电阻**（R2接SCL到VCC，R3接SDA到VCC），所以你的主板上**不需要再加上拉电阻**。

> **如果同一条I2C总线上还挂了其他设备怎么办？** 每个I2C设备的模组都可能自带上拉电阻。多个上拉电阻并联会导致等效电阻变小、上拉太强（上升沿太陡），在高速通信时可能产生信号过冲。
>
> 但在我们的项目中，I2C总线上目前只有MPU6050一个设备，而且只用100kHz或400kHz标准速率，5.1K完全没问题。如果以后加更多I2C设备，到时候再评估。

### SCL和SDA的GPIO选择 — 为什么用IO5和IO6？

ESP32-S3的I2C外设可以映射到任意GPIO（和I2S一样灵活），所以理论上用任何空闲GPIO都行。

选IO5和IO6的原因：
1. **它们还没被占用**（I2S占了IO8/IO14-18，SPI占了IO9-12/IO46）
2. **相邻的引脚**，PCB走线方便
3. **不是strapping引脚**（IO0是启动模式引脚，避开它更安全）

| 信号 | 选用GPIO | 网络标签 |
|------|---------|---------|
| I2C时钟 | IO6 | `I2C_SCL` |
| I2C数据 | IO5 | `I2C_SDA` |
| 中断（可选） | IO4 | `MPU_INT` |

> **能不能换别的引脚？** 可以。只要是可用GPIO（不在GPIO22~37范围内、不和已用引脚冲突），随意换。改了之后记得代码里也要改I2C初始化的引脚配置。

### ADO（地址选择）— 为什么不接？

MPU6050的7位I2C地址是 `b110100X`，最低位X由ADO引脚决定：

| ADO电平 | I2C地址（7位） | I2C地址（8位写） |
|---------|-------------|--------------|
| LOW (GND) | 0x68 | 0xD0 |
| HIGH (VCC) | 0x69 | 0xD2 |

模组内部R1（5.1K）已经把ADO拉到GND了，所以默认地址就是**0x68**。我们不需要改地址，不接就行。

> **什么时候需要改地址？** 如果你在同一条I2C总线上挂两颗MPU6050（比如一颗检测头部、一颗检测手臂），第二颗的ADO需要接VCC（地址变成0x69），这样两颗芯片不会冲突。但我们只有一颗，用默认地址就好。

### CL和DA（辅助I2C）— 为什么不接？

MPU6050内部有一个"辅助I2C主机"接口，可以直接连接一颗外部磁力计（如HMC5883L或AK8963），实现9轴传感器融合（加速度3轴 + 陀螺仪3轴 + 磁力计3轴）。

CL（即AUX_CL）和DA（即AUX_DA）就是辅助I2C总线的时钟和数据线。

我们的项目只需要检测"摇一摇"动作，用加速度计就够了，不需要磁力计做精确的方向定位。所以AUX_CL和AUX_DA不接。

### INT（中断输出）— 接还是不接？

MPU6050可以在特定事件发生时通过INT引脚发送中断信号给主控：

| 可触发中断的事件 | 说明 |
|---------------|------|
| 数据就绪 | 加速度/陀螺仪新数据准备好了 |
| FIFO溢出 | 内部缓冲区满了 |
| 运动检测 | 检测到加速度超过阈值（**就是"摇一摇"！**） |
| 零运动检测 | 检测到设备静止不动 |
| 自由落体检测 | 检测到设备在自由下落 |

**对于"摇一摇"功能，INT引脚非常有用。** MPU6050可以在硬件层面检测运动事件，然后通过INT引脚通知ESP32-S3。这样ESP32-S3不需要不停地去读传感器数据（轮询），只需要在收到中断时处理，省CPU也省电。

**推荐接上INT引脚**，接到ESP32-S3的IO4。

> **不接INT也能实现摇一摇吗？** 可以。ESP32-S3可以用定时器每隔比如50ms通过I2C读一次加速度数据，软件判断是否超过阈值。这叫"轮询"方式，功能上完全可行，就是ESP32-S3要不停地去读数据，稍微浪费一点CPU资源。
>
> 但对我们这个项目来说，ESP32-S3性能很强（双核240MHz），轮询50ms一次完全不是负担。所以INT引脚接不接都行。接了更优雅，不接也不影响功能。

---

## 第八步：更新ESP32-S3原理图

需要回到 **01_ESP32-S3最小系统** 那张原理图，在ESP32-S3模组上添加网络标签：

| 标签名 | ESP32-S3引脚 | 连接目标 |
|--------|-------------|---------|
| `I2C_SCL` | IO6 | MPU6050模组 SCL |
| `I2C_SDA` | IO5 | MPU6050模组 SDA |
| `MPU_INT` | IO4 | MPU6050模组 INT（可选） |

操作：在ESP32-S3模组的IO4、IO5、IO6引脚旁分别放置这三个网络标签。

---

## 第九步：检查清单

画完后，逐项确认：

- [ ] ZY-MPU-6050模组（U4）已放置
- [ ] VCC (Pin 1) 接3V3
- [ ] GND (Pin 2) 接GND
- [ ] SCL (Pin 3) 标签 `I2C_SCL` — 和ESP32-S3的IO6同名
- [ ] SDA (Pin 4) 标签 `I2C_SDA` — 和ESP32-S3的IO5同名
- [ ] ADO (Pin 5) 不接，标注NC
- [ ] CL (Pin 6) 不接，标注NC
- [ ] DA (Pin 7) 不接，标注NC
- [ ] INT (Pin 8) 标签 `MPU_INT` — 和ESP32-S3的IO4同名（或标注NC）
- [ ] C9 (100nF) 接在VCC和GND之间，紧靠Pin 1
- [ ] 已在ESP32-S3原理图上添加 `I2C_SCL`、`I2C_SDA`、`MPU_INT` 标签
- [ ] 所有网络标签拼写一致（大小写也要一致）

---

## 第十步：画完后你应该有这些元件

| 类别 | 元件 | 位号 | 值/型号 | 数量 |
|------|------|------|--------|------|
| 核心 | 六轴传感器模组 | U4 | ZY-MPU-6050 | 1 |
| 电源 | 去耦电容 | C9 | 100nF / 0603 | 1 |

**总计：1个模组 + 1个电容 + 2~3个网络标签**

这是到目前为止所有模块中最简单的一个——模组已经把所有脏活累活干完了。

---

## 更新后的引脚分配总表

加上MPU6050后，ESP32-S3的引脚使用情况：

| 标签名 | ESP32-S3引脚 | 连接模块 | 信号说明 |
|--------|-------------|---------|---------|
| `I2S_MIC_SCK` | IO14 | INMP441麦克风 | I2S时钟线 |
| `I2S_MIC_WS` | IO15 | INMP441麦克风 | I2S帧同步 |
| `I2S_MIC_SD` | IO16 | INMP441麦克风 | I2S数据输入 |
| `I2S_SPK_BCLK` | IO17 | MAX98357A功放 | I2S位时钟 |
| `I2S_SPK_LRC` | IO18 | MAX98357A功放 | I2S左右声道选择 |
| `I2S_SPK_DIN` | IO8 | MAX98357A功放 | I2S数据输出 |
| `SPI_SCK` | IO12 | ST7789屏幕 | SPI时钟线 |
| `SPI_MOSI` | IO11 | ST7789屏幕 | SPI数据线 |
| `LCD_DC` | IO10 | ST7789屏幕 | 数据/命令选择 |
| `LCD_CS` | IO9 | ST7789屏幕 | 片选 |
| `LCD_RST` | IO46 | ST7789屏幕 | 屏幕复位 |
| **`I2C_SCL`** | **IO6** | **MPU6050模组** | **I2C时钟线** |
| **`I2C_SDA`** | **IO5** | **MPU6050模组** | **I2C数据线** |
| **`MPU_INT`** | **IO4** | **MPU6050模组** | **中断输出（可选）** |
| - | IO19 | USB D- | 固定 |
| - | IO20 | USB D+ | 固定 |

**剩余可用GPIO**：IO0(启动)、IO1、IO2、IO3、IO7、IO13、IO21、IO38、IO39、IO40、IO41、IO42、IO45、IO47、IO48、TXD0、RXD0

还有足够的引脚给后续的TTP223触摸模块和按键。

---

## 常见问题

**Q: 邮票孔模组的PCB封装怎么画？**

这是PCB阶段的事。简单说，你需要在PCB封装编辑器中画8个半圆形焊盘（放在PCB板边），焊盘间距2.54mm，焊盘宽度约1mm。嘉立创EDA的封装编辑器可以用"圆形焊盘+放在板边切一半"的方式实现。具体做法在PCB阶段再教。

**Q: 我买的MPU6050模组是排针版（不是邮票孔），能用吗？**

能用。原理图完全一样（引脚定义一样），只是PCB封装不同——排针版用2.54mm间距的通孔焊盘，邮票孔版用半圆形表贴焊盘。原理图画一份，PCB阶段换个封装就行。

**Q: MPU6050和QMI8658该选哪个？**

项目清单里提到了 MPU6050 / QMI8658 两个选项：

| 对比 | MPU6050 | QMI8658 |
|------|---------|---------|
| 生产状态 | 已停产（但仿品/兼容品大量供应） | 在产 |
| 资料丰富度 | 极其丰富（Arduino库、教程满天飞） | 较少（较新的芯片） |
| 价格 | 模组约5~10元 | 裸芯片约3~5元，模组较少 |
| 噪声性能 | 一般 | 更好 |
| 我们的场景 | "摇一摇"检测，完全够用 | 性能过剩 |

对于"摇一摇"这种简单的运动检测，MPU6050绰绰有余，而且教程和代码库极其丰富，调试起来容易。选MPU6050模组是最稳妥的方案。

**Q: I2C通信速率选多少？**

MPU6050支持标准模式（100kHz）和快速模式（400kHz）。对于读取加速度数据做摇一摇检测，100kHz就够了。如果后续需要更高刷新率（比如做姿态解算），可以切到400kHz，只需要改代码里的I2C初始化参数，硬件不需要任何改动。

**Q: 模组已经有上拉电阻了，我的板子上还能再加吗？**

可以但不建议。模组内置5.1K上拉，如果你在主板上再加一组比如4.7K上拉，等效电阻变成约2.4K。在100kHz速率下这通常没问题，但上拉太强可能在400kHz时出现信号质量问题（过冲、振铃）。

简单原则：**一条I2C总线上只需要一组上拉电阻**。模组已经有了，主板就不要加了。

---

## 下一步

MPU6050陀螺仪模组画好后，建议接下来画 **TTP223触摸模块 + 按键电路**（人机交互），这样整个项目的所有硬件模块就齐了。

准备好了就告诉我。
